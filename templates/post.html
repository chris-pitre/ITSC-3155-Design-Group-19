{% extends '_layout.html' %}

{% block title %}NinerStudy | {{ post.title }}{% endblock %}

{% block body %}
<div class="card mb-3" style="max-width: 100%; max-height: 600px;">
    <div class="card-header text-white" style="background-color: #005035;">
        <h5 class="card-title text-white text-center">{{ post.title }}</h5>
    </div>
    <div class="row g-0">
      <div class="col">
        <div class="card-body">
          <p class="card-text">{{ post.post_text }}</p>
          <p class="card-text"><small class="text-body-secondary">Posted on {{ post.post_date }}</small></p>
          <p class="card-text"><small class="text-body-secondary">Posted by {{ post.user_username }}</small></p>
          {% if current_user.is_authenticated %}
            <a href="/createReply/{{ post.post_id }}" class="btn text-white" style="background-color: #005035">Reply</a>
          {% endif %}
        </div>
      </div>
      {% if post.media_id !=  None %}
      <div class="col-md-4">
        <img src="../{{ post.media_path }}" class="img-fluid img-thumbnail float-end" alt="{{ post.media_alttext }}">
      </div>
      {% endif %}
    </div>
</div>
{% for reply in replies %}
    <div class="card mb-3" style="max-width: 100%; max-height: 600px;">
        <div class="row g-0">
          <div class="col">
            <div class="card-body">
              <p class="card-text">{{ reply.reply_text }}</p>
              {% if reply.media_id !=  None %}
                <a class="btn btn-sm text-white" style="background-color: #005035;" data-bs-toggle="collapse" href="#image/{{ reply.media_id }}" role="button" aria-expanded="false" aria-controls="{{ reply.media_id }}Collapse">
                    View Image
                </a> 
              {% endif %}
              <p class="card-text"><small class="text-body-secondary">Posted on {{ reply.post_date }}</small></p>
              <p class="card-text"><small class="text-body-secondary">Posted by {{ reply.user_username }}</small></p>
            </div>
          </div>
          {% if reply.media_id !=  None %}
          <div class="col-md-4">
            <div class="collapse" id="image/{{ reply.media_id }}">
                <img src="../{{ reply.media_path }}" class="img-fluid img-thumbnail float-end" alt="{{ reply.media_alttext }}">
            </div>
          </div>
          {% endif %}
        </div>
    </div>
  {% endfor %} 

  <br>
  <br>
{% endblock %}
